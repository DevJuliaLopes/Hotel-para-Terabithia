<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hotel para o paraiso</title>
</head>

<body>
    <script>

        let multi;
        var nome_hotel = prompt("Digite o nome do hotel que você quer acessar");
        alert(`Bem vindo (a) ao hotel: ${nome_hotel}`);
        var senha = 2678;
        var nome = prompt("Digite seu nome");

        function passw() {
            if (senha == prompt("Digite sua senha:")) {
                alert(`Olá, ${nome}`);
                comeco();
            } else {
                alert("Senha Incorreta, tente novamente");
                passw();

            }
        }

        function comeco() {

            var escolher = parseInt(prompt('Selecione uma opção \n 1.) Reserva de Quartos \n 2.) Cadastro de Hóspedes \n 3.) Pesquisar Hóspedes \n 4.) Eventos  \n 5.) Buffet \n 6.) Auditório \n 7.) Restaurante \n 8.) Posto de Gasolina \n 9.) Ar Condicionado \n Sair '));

            switch (escolher) {
                case 1:
                    reserva();
                    break;
                case 2:
                    cadas_hospedes();
                    break;
                case 3:
                    pes_host();
                    break;
                case 4:
                    events();
                    break;
                case 5:
                    buffets();
                    break;
                case 6:
                    auditorio();
                    break;
                case 7:
                    restaurante();
                    break;
                case 8:
                    gasolina();
                    break;
                case 9:
                    ar();
                    break;
                default: //tipo else "se não"
                    sair();
                    break;
            }
        }
        function reserva() {
            let diaria = parseFloat(prompt("Digite o valor da diária"));
            let dias = prompt("Quantos dias ficara hospedado?");
            if (isNaN(diaria, dias) && diaria, dias <= 0 && dias >= 30 && diaria, dias === '') {
                alert("Digite um número de dias válido:");
                reserva();
            } else {
                multi = diaria * dias;
                alert(`Valor de ${dias} dias de hospedagem é: R$${multi}`);

            }
            let nome_hosp = prompt("Digite o nome do hóspede:");

            var opcao = prompt(`${nome}, você confirma a hospedagem para ${nome_hosp} por ${dias} dias? S/N}`)
            switch (opcao) {
                case "S":
                    alert(`${nome}, reserva efetuada para ${nome_hosp}. O valor total é de R$${multi}.`);
                    comeco();
                    break;
                case "N":
                    alert(`${nome}, reserva não efetuada`);
                    comeco();
                    break;
                default:
                    alert(`Opção invalida`);
                    break;
            }
        }

        function cadas_hospedes() {
            let di = parseFloat(prompt("Digite o valor da diária"));
            let hospedes = [];
            let gratu = 0;
            let meia = 0;
            let total = 0;

            while (true) {
                let nomes = prompt("Digite o nome dos hóspedes:");
                switch (nomes) {
                    case "PARE":
                        let valor_total = (di * total) + (di / 2 * meia); // di/2 = valor da diaria dividido por 2.
                        alert(`${nome}, o valor total das hospedagens é: R$${valor_total}; ${gratu} gratuidade(s); ${meia} meia(s).`);
                        comeco();
                        break;
                }
                let idade = parseInt(prompt("Digite a idade do hóspede"));
                if (idade < 6) {
                    gratu++;
                    alert(`${nomes}, foi cadastrado(a) com sucesso. ${nomes} possui gratuidade`);
                } else if (idade >= 60) {
                    meia++;
                    alert(`${nomes}, foi cadastrado(a) com sucesso. ${nomes} possui meia entrada`);
                } else {
                    total++;
                    alert(`${nomes}, foi cadastrado(a) com sucesso.`);
                }

            }
        }

        function pes_host() {
            let opcoes = parseInt(prompt("O que você deseja fazer? \n 1.) Cadastrar \n 2.) Pesquisar \n 3.) Listar \n 4.) Sair."));
            switch (opcoes) {
                case 1:
                    cadastro();
                    break;
                case 2:
                    pesquisar();
                    break;
                case 3:
                    listar();
                    break;
                case 4:
                    sair();
                    break;
                default:
                    alert("ERRO");
                    pes_host();
                    break
            }
        }
        let hospede = [];

        function cadastro() {
            let cads = prompt("Qual o nome do Hóspede?");
            if (cads > 15) {
                alert("Máximo de cadastros atingido");
                pes_host();
            } else {
                alert(`Hóspede ${cads} foi cadastrada com sucesso!`);
                hospede.push(cads); //adicionar o nome dentro dos []
                pes_host();
            }
        }

        function pesquisar() {
            let pesqu = prompt("Qual o nome do Hóspede que deseja encontrar?");
            if (hospede.includes(pesqu)) { //buscar os nomes que estão dentro do PUSH.
                alert(`Hóspede ${hospede} foi encontrada(o)!`);
                pes_host()
            } else {
                alert("Hóspede não encontrada, deseja cadastrar?");
                pes_host();
            }
           }
            function listar() {
                alert(`Os hóspedes que ja foram cadastrados são: \n${hospede.join('\n')}`);
                pes_host();
            }

            function sair() {
                alert(`Muito obrigado e até logo, ${nome}.`);
                comeco();
            }
        
        function events() {

            let duracao = prompt("Qual a duração do evento em horas?");
            let garcons = parseInt(prompt("Quantos garçons vai ser necessário?"));
            alert(`O custo da contratação dos garçons sera: R$336,00`);
            let cont = prompt("Gostaria de continuar a reserva S/N?");
            switch (cont) {
                case "S":
                    alert(`${nome}, reserva efetuada com sucesso.`);
                    comeco();
                    break;
                case "N":
                    alert("Opção inexistente");
                    comeco();
                    break;
                default:
                    alert("ERRO");
                    break;
            }
        }
            function buffets() {
                let conv = parseInt(prompt("Qual é a quantidade de pessoas para o evento?"));
                let cafe = 2;
                let agua = 5;
                let salgados = 7;
                if (conv >= 350) {
                    alert("Quantidade de convidados superior à capacidade máxima.");
                    comeco();
                } else {
                    let calculo_c = cafe * conv / 20;
                    let calculo_a = agua * conv / 20;
                    let calculo_s = salgados * conv;
                    let total_calc = (calculo_c * 0.8) + (calculo_a * 0.4) + (calculo_s * 0.34);

                    alert(`O evento precisará de ${calculo_c} litros de café, ${calculo_a} litros de água, ${calculo_s} salgados. O custo total do evento será de R$${total_calc}`);
                }
            
            let reserva = prompt("Gostaria de efetuar a reserva? S/N");
            switch (reserva) {
                case "S":
                    alert(`${nome}, reserva efetuada com sucesso.`);
                    comeco();
                    break;
                case "N":
                    alert("Opção inexistente");
                    comeco();
                    break;
                default:
                    alert("ERRO");
                    break;

            }
            }
            function auditorio(){
                let qut_conv = parseInt(prompt("Qual o número de convidados para o seu evento?"));
                if (qut_conv > 350 && qut_conv <= 0){
                    alert("Número de convidados inválido");
                    auditorio();
                } else if (qut_conv > 0 && qut_conv <= 150) {
                    alert("Use o auditório laranja");
                    reservaa();
                } else if (qut_conv <= 220 && qut_conv > 150) {
                    let calculo = 70 - (220 - qut_conv);
                    alert("Use o auditório laranja, (inclua mais " + calculo + " cadeiras)");
                    reservaa();
                } else {
                    alert("Use o auditório Colorado");
                    reservaa();
                }
            }
            
            function reservaa() {
                let do_reserva = prompt("Deseja fazer a reserva? S/N");
                switch (do_reserva) {
                    case "S":
                        alert(`${nome}, reserva efetuada com sucesso.`);
                        comeco();
                        break;
                    case "N":
                        alert(`${nome}, reserva não efetuada.`);
                        comeco();
                        break;
                    default:
                        alert("ERRO");
                        break;
                }
            }
        
            function restaurante() {
        let semana = prompt("Qual o dia do seu evento?");

        switch (semana) {
            case "domingo":
                domingo();
                break;
            case "segunda":
                segunda();
            case "terça":
                terca();
                break;
            case "quarta":
                quarta();
                break;
            case "quinta":
                quinta();
                break;
            case "sexta":
                sexta();
                break;
            case "sabado":
                sabado();
                break;
            default:
                alert("Essa opção não existe!");
                restaurante();
                break;
        }
    }

    function domingo() {
        let horas_domingo = parseInt(prompt("Qual é a hora do evento?"));

        if (horas_domingo >= 7 && horas_domingo <= 15){
            let nome_empresa = prompt("Qual o nome da empresa?");
            alert(`Restaurante reservado para Lojas ${nome_empresa}. Domingo às ${horas_domingo}hs.`);
            comeco();
        } else {
            alert("Restaurante indisponível");
            restaurante();
        }
    }

    function segunda() {
        let horas_segunda = parseInt(prompt("Qual é a hora do evento?"));

        if (horas_segunda >= 7 && horas_segunda <= 23){
            let nome_empresa = prompt("Qual o nome da empresa?");
            alert(`Restaurante reservado para Lojas ${nome_empresa}. Segunda às ${horas_segunda}hs.`);
            comeco();
        } else {
            alert("Restaurante indisponível");
            restaurante();
        }
    }

    function terca() {
        let horas_terca = parseInt(prompt("Qual é a hora do evento?"));

        if (horas_terca >= 7 && horas_terca <= 23){
            let nome_empresa = prompt("Qual o nome da empresa?");
            alert(`Restaurante reservado para Lojas ${nome_empresa}. Terça às ${horas_terca}hs.`);
            comeco(); 
        } else {
            alert("Restaurante indisponível");
            restaurante();
        }
    }

    function quarta() {
        let horas_quarta = parseInt(prompt("Qual é a hora do evento?"));

        if (horas_quarta >= 7 && horas_quarta <= 23){
            let nome_empresa = prompt("Qual o nome da empresa?");
            alert(`Restaurante reservado para Lojas ${nome_empresa}. Quarta às ${horas_quarta}hs.`);
            comeco(); 
        } else {
            alert("Restaurante indisponível");
            restaurante();
        }
    }

    function quinta() {
        let horas_quinta = parseInt(prompt("Qual é a hora do evento?"));

        if (horas_quinta >= 7 && horas_quinta <= 23){
            let nome_empresa = prompt("Qual o nome da empresa?");
            alert(`Restaurante reservado para Lojas ${nome_empresa}. Quinta às ${horas_quinta}hs.`);
            comeco(); 
        } else {
            alert("Restaurante indisponível");
            restaurante();
        }
    }

    function sexta() {
        let horas_sexta = parseInt(prompt("Qual é a hora do evento?"));

        if (horas_sexta >= 7 && horas_sexta <= 23){
            let nome_empresa = prompt("Qual o nome da empresa?");
            alert(`Restaurante reservado para Lojas ${nome_empresa}. Sexta às ${horas_sexta}hs.`);
            comeco(); 
        } else {
            alert("Restaurante indisponível");
            restaurante();
        }
    }

    function sabado() {
        let horas_sabado = parseInt(prompt("Qual é a hora do evento?"));

        if (horas_sabado >= 7 && horas_sabado <= 15){
            let nome_empresa = prompt("Qual o nome da empresa?");
            alert(`Restaurante reservado para Lojas ${nome_empresa}. Sábado às ${horas_sabado}hs.`);
            comeco(); 
        } else {
            alert("Restaurante indisponível");
            restaurante();
        }
    }
    function gasolina() {
        let Wayne_Oil = parseFloat(prompt("Qual o preço da gasolina do posto Wayne Oil?"));
        let Stark_Petrol = parseFloat(prompt("Qual o preço do gasolina do posto Stark Petrol"));

        let Wayne_Oil2 = parseFloat(prompt("Qual o preço da alcool do posto Wayne Oil?"));
        let Stark_Petrol2 = parseFloat(prompt("Qual o preço do alcool do posto Stark Petrol?"));

        let preco_alcool = Math.min (Wayne_Oil2,Stark_Petrol2);
        let preco_gasolina = Math.min (Wayne_Oil,Stark_Petrol);

        let resultado = preco_alcool/preco_gasolina; 
        let comb_atraente = "";

        if(resultado <= 7){
            comb_atraente = "Alcool";
        }else {
            comb_atraente = "Gasolina";
        }
        let posto_barato;

        switch (comb_atraente){
            case 'Alcool':
                let prec_comb = preco_alcool;
                if (Wayne_Oil2 === prec_comb || Wayne_Oil === prec_comb ){
                    posto_barato =  'Wayne_Oil';
                }else { 
                    posto_barato = 'Stark Petrol';
                }
        
        break;
             case 'Gasolina': 
             prec_comb = preco_gasolina;
             if (Wayne_Oil === prec_comb || Wayne_Oil2 === prec_comb){
                posto_barato = 'Wayne Oil';
             }else {
                posto_barato = 'Stark Petrol';
             }
             break;
            }
            alert (`${nome}, é mais barato abastecer com ${comb_atraente} no posto ${posto_barato}`);
            comeco();
    }

            
    function ar() {
        var stop = 1;
        var companies = [];

    while(stop) {
        var companie = prompt(`Qual o nome da empresa?`) || `Empresa ${companies.length + 1}`;
        var pricePerDevice = parseFloat(prompt("Qual o valor por aparelho?"));
        while(pricePerDevice < 0 || !pricePerDevice) {
            pricePerDevice = parseFloat(prompt("Ops! Digite um valor valido:"));
        }
        var device = parseInt(prompt("Qual a quantidade de aparelho?"));
        while(device < 0 || !device) {
            device = parseFloat(prompt("Ops! Digite um valor valido:"));
        }
        var discount = parseFloat(prompt("Qual a porcentagem de desconto?")) || 0; 
        var minDeviceDiscount = parseInt(prompt("Qual o número de aparelhos para consegui o desconto?")) || 0;

        var budget = device >= minDeviceDiscount ? (pricePerDevice * device) * ((100 - discount) / 100) : pricePerDevice * device;

        companies.push({companie, budget});
        alert(`O serviço da ${companie} custará ${budget.toLocaleString("pt-br", { style: "currency", currency: "BRL" })}`);
        if(prompt(`Deseja informar novos dados, ${nome}? (S/N)`).toLocaleLowerCase() == "n") {
            stop = 0;
        }
    }
        const melhorOrcamento = companies.reduce((a, b) => {
        return a.budget < b.budget ? a : b;
    });

    alert(`O orçamento de menor valor é o: ${melhorOrcamento.companie} por ${melhorOrcamento.budget.toLocaleString("pt-br", {styles: "currency", currency: "BRL"})}`);
    comeco();
    }



            passw();
    </script>

</body>

</html>